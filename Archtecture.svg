<svg viewBox="0 0 800 700" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="700" fill="#fff"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-size="24" font-weight="bold" fill="#2c3e50">
    MorphingTalk-API Clean Architecture
  </text>
  
  <!-- API Layer -->
  <rect x="50" y="60" width="700" height="120" fill="#3498db" stroke="#2980b9" stroke-width="2" rx="10"/>
  <text x="400" y="85" text-anchor="middle" font-size="18" font-weight="bold" fill="white">
    API Layer (MorphingTalk-API)
  </text>
  <text x="70" y="110" font-size="14" fill="white">• Auth Controller</text>
  <text x="70" y="130" font-size="14" fill="white">• Chatting Controller</text>
  <text x="70" y="150" font-size="14" fill="white">• Voice Training Controller</text>
  <text x="70" y="170" font-size="14" fill="white">• SignalR ChatHub</text>
  
  <text x="250" y="110" font-size="14" fill="white">• User Controller</text>
  <text x="250" y="130" font-size="14" fill="white">• Friendship Controller</text>
  <text x="250" y="150" font-size="14" fill="white">• File Controller</text>
  <text x="250" y="170" font-size="14" fill="white">• Call Controller</text>
  
  <text x="450" y="110" font-size="14" fill="white">• JWT Authentication</text>
  <text x="450" y="130" font-size="14" fill="white">• CORS Policy</text>
  <text x="450" y="150" font-size="14" fill="white">• Static Files</text>
  <text x="450" y="170" font-size="14" fill="white">• Webhook Controller</text>
  
  <!-- Application Layer -->
  <rect x="50" y="230" width="700" height="120" fill="#e74c3c" stroke="#c0392b" stroke-width="2" rx="10"/>
  <text x="400" y="255" text-anchor="middle" font-size="18" font-weight="bold" fill="white">
    Application Layer
  </text>
  <text x="70" y="280" font-size="14" fill="white">• Auth Services</text>
  <text x="70" y="300" font-size="14" fill="white">• OTP Service</text>
  <text x="70" y="320" font-size="14" fill="white">• Token Service</text>
  <text x="70" y="340" font-size="14" fill="white">• Email Service</text>
  
  <text x="250" y="280" font-size="14" fill="white">• Message Handlers</text>
  <text x="250" y="300" font-size="14" fill="white">• AI Webhook Service</text>
  <text x="250" y="320" font-size="14" fill="white">• Translation Services</text>
  <text x="250" y="340" font-size="14" fill="white">• SignalR Notifications</text>
  
  <text x="450" y="280" font-size="14" fill="white">• Conversation Service</text>
  <text x="450" y="300" font-size="14" fill="white">• Friendship Service</text>
  <text x="450" y="320" font-size="14" fill="white">• File Storage Service</text>
  <text x="450" y="340" font-size="14" fill="white">• Voice Processing</text>
  
  <!-- Domain Layer -->
  <rect x="50" y="400" width="700" height="120" fill="#f39c12" stroke="#e67e22" stroke-width="2" rx="10"/>
  <text x="400" y="425" text-anchor="middle" font-size="18" font-weight="bold" fill="white">
    Domain Layer (Core)
  </text>
  <text x="70" y="450" font-size="14" fill="white">• User Entity</text>
  <text x="70" y="470" font-size="14" fill="white">• Friendship Entity</text>
  <text x="70" y="490" font-size="14" fill="white">• Conversation Entity</text>
  <text x="70" y="510" font-size="14" fill="white">• ConversationUser</text>
  
  <text x="250" y="450" font-size="14" fill="white">• Message Entity</text>
  <text x="250" y="470" font-size="14" fill="white">• TextMessage</text>
  <text x="250" y="490" font-size="14" fill="white">• VoiceMessage</text>
  <text x="250" y="510" font-size="14" fill="white">• ImageMessage</text>
  
  <text x="450" y="450" font-size="14" fill="white">• UserVoiceModel</text>
  <text x="450" y="470" font-size="14" fill="white">• MessageType Enum</text>
  <text x="450" y="490" font-size="14" fill="white">• Repository Interfaces</text>
  <text x="450" y="510" font-size="14" fill="white">• Service Interfaces</text>
  
  <!-- Infrastructure Layer -->
  <rect x="50" y="570" width="700" height="120" fill="#27ae60" stroke="#229954" stroke-width="2" rx="10"/>
  <text x="400" y="595" text-anchor="middle" font-size="18" font-weight="bold" fill="white">
    Infrastructure Layer
  </text>
  <text x="70" y="620" font-size="14" fill="white">• ApplicationDbContext</text>
  <text x="70" y="640" font-size="14" fill="white">• EF Core Migrations</text>
  <text x="70" y="660" font-size="14" fill="white">• User Repository</text>
  <text x="70" y="680" font-size="14" fill="white">• Message Repository</text>
  
  <text x="280" y="620" font-size="14" fill="white">• Conversation Repository</text>
  <text x="280" y="640" font-size="14" fill="white">• Friendship Repository</text>
  <text x="280" y="660" font-size="14" fill="white">• File Storage</text>
  <text x="280" y="680" font-size="14" fill="white">• Identity Services</text>
  
  <text x="480" y="620" font-size="14" fill="white">• LibreTranslate API</text>
  <text x="480" y="640" font-size="14" fill="white">• MyMemory Translation</text>
  <text x="480" y="660" font-size="14" fill="white">• Firebase Integration</text>
  <text x="480" y="680" font-size="14" fill="white">• AI Voice Services</text>
  
  <!-- Dependency Arrows -->
  <!-- API -> Application (longer, more visible) -->
  <path d="M 400 180 L 400 228" stroke="#2c3e50" stroke-width="4" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Application -> Domain (longer, more visible) -->
  <path d="M 400 350 L 400 398" stroke="#2c3e50" stroke-width="4" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Domain -> Infrastructure -->
  <path d="M 400 520 L 400 568" stroke="#2c3e50" stroke-width="4" fill="none" marker-end="url(#arrowhead)"/>

  

  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2c3e50"/>
    </marker>
  </defs>
  
  <!-- External Dependencies -->
  <circle cx="690" cy="630" r="60" fill="#95a5a6" stroke="#7f8c8d" stroke-width="2"/>
  <text x="690" y="615" text-anchor="middle" font-size="12" font-weight="bold" fill="white">External</text>
  <text x="690" y="630" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Dependencies</text>
  <text x="690" y="645" text-anchor="middle" font-size="10" fill="white">(SQL Server,</text>
  <text x="690" y="658" text-anchor="middle" font-size="10" fill="white">Translation APIs,</text>
  <text x="690" y="671" text-anchor="middle" font-size="10" fill="white">AI Services)</text>
  
  <!-- Connection from Infrastructure to External -->
  <path d="M 655 630 L 630 630" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  

</svg>